function findMatches(e,t){return t.filter(function(t){var n=new RegExp(e,"gi");return t.city.match(n)||t.state.match(n)})}function numberWithCommas(e){return e.toString().replace(/\B(?=(\d{3})+(?!\d))/g,",")}function displayMatches(){var e=findMatches(this.value,cities).map(function(e){var t=document.createElement("li"),n=document.createElement("span"),s=document.createElement("span"),a=(document.createElement("span"),new RegExp(this.value,"gi")),i=e.city.replace(a,'<span class="hl">'+this.value+"</span>"),c=e.state.replace(a,'<span class="hl">'+this.value+"</span>");return n.className="name",s.className="population",n.innerHTML=i+" "+c,s.textContent=numberWithCommas(e.population),t.appendChild(n),t.appendChild(s),t.outerHTML},this).join("");if(console.log(this.value),""===this.value)return suggestions.innerHTML="";suggestions.innerHTML="",suggestions.innerHTML=e}var endpoint="https://gist.githubusercontent.com/Miserlou/c5cd8364bf9b2420bb29/raw/2bf258763cdddd704f8ffd3ea9a3e81d25e2c6f6/cities.json",cities=[];fetch(endpoint).then(function(e){return e.json()}).then(function(e){return cities.push.apply(cities,e)});var searchInput=document.querySelector(".search"),suggestions=document.querySelector(".suggestions");searchInput.addEventListener("change",displayMatches),searchInput.addEventListener("keyup",displayMatches);